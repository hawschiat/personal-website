import React, {useEffect, useState} from "react";

export default function TRexLoader(): React.ReactElement {
  const [leftLegUp, setLeftLegUp] = useState(true);
  const [rightLegUp, setRightLegUp]= useState(false);
  const [walkInterval, setWalkInterval] = useState<NodeJS.Timeout>();

  const leftLeg = () => {
    if (leftLegUp) {
      return "249.058571 70.9769452 272.398571 101.351585 272.398571 101.351585 263.301429 87.5043228 263.301429 87.5043228 257.228571 101.351585 257.228571 101.351585 253.367143 115.645533 253.367143 115.645533";
    }
    return "249.058571 70.9769452 305.398571 101.351585 305.398571 101.351585 289.301429 87.5043228 289.301429 87.5043228 277.228571 101.351585 277.228571 101.351585 263.367143 115.645533 263.367143 115.645533";
  }

  const rightLeg = () => {
    if (rightLegUp) {
      return "253.367143 141.553314 253.367143 141.553314 266.398571 171.927954 266.398571 171.927954 255.301429 157.634006 255.301429 157.634006";
    }
    return "263.367143 141.553314 263.367143 141.553314 305.398571 171.927954 305.398571 171.927954 289.301429 157.634006 289.301429 157.634006";
  }

  const toggleLeg = () => {
    setLeftLegUp(prev => !prev);
    setRightLegUp(prev => !prev);
  };

  useEffect(() => {
    if (walkInterval) {
      clearInterval(walkInterval);
    }
    setWalkInterval(setInterval(toggleLeg, 100));

    return () => {
      if (walkInterval) {
        clearInterval(walkInterval);
      }
    }
  }, []);

  return (
    <svg
      width="285px"
      height="306px"
      viewBox="13 0 285 306"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlnsXlink="http://www.w3.org/1999/xlink"
    >
      <g
        id="Group-3"
        stroke="none"
        strokeWidth="1"
        fill="none"
        fillRule="evenodd"
        transform="translate(13.000000, 0.000000)"
      >
        <polygon
          id="Path"
          fill="#666666"
          points={`256.351585 91.6642857 213.916427 91.6642857 213.916427 80.0385714 284.492795 80.0385714 284.492795 14.3085714 270.198847 14.3085714 270.198847 0 155.400576 0 155.400576 14.3085714 141.553314 14.3085714 141.553314 105.972857 127.259366 105.972857 127.259366 119.834286 106.26513 119.834286 106.26513 134.142857 85.2708934 134.142857 85.2708934 148.451429 70.9769452 148.451429 70.9769452 162.312857 45.0691643 162.312857 45.0691643 148.004286 31.221902 148.004286 31.221902 134.142857 16.9279539 134.142857 16.9279539 105.972857 0.847262248 105.972857 0.847262248 192.718571 14.6945245 192.718571 14.6945245 207.027143 28.9884726 207.027143 28.9884726 220.888571 42.8357349 220.888571 42.8357349 235.197143 57.129683 235.197143 57.129683 249.058571 70.9769452 ${leftLeg()} 249.058571 127.259366 249.058571 127.259366 ${rightLeg()} 235.197143 171.927954 235.197143 171.927954 220.888571 185.775216 220.888571 185.775216 199.872857 200.069164 199.872857 200.069164 150.687143 211.682997 150.687143 211.682997 164.548571 228.210375 164.548571 228.210375 134.142857 200.069164 134.142857 200.069164 108.208571 256.351585 108.208571`}
        ></polygon>
        <rect
          id="Rectangle"
          fill="#FFFFFF"
          x="169.247839"
          y="20.5685714"
          width="16.9740634"
          height="16.9914286"
        ></rect>
      </g>
    </svg>
  );
}
